(function(e){function t(t){for(var n,r,i=t[0],u=t[1],s=t[2],l=0,d=[];l<i.length;l++)r=i[l],o[r]&&d.push(o[r][0]),o[r]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);f&&f(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==o[i]&&(n=!1)}n&&(c.splice(t--,1),e=u(u.s=a[0]))}return e}var n={},r={app:0},o={app:0},c=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-04d71d50":"ed4f2711","chunk-3b6f328d":"83ad94c9","chunk-5e0ee7f7":"95aee324","chunk-6c118d8f":"f0365078"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.e=function(e){var t=[],a={"chunk-04d71d50":1,"chunk-3b6f328d":1,"chunk-5e0ee7f7":1,"chunk-6c118d8f":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise(function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-04d71d50":"9a0f9d73","chunk-3b6f328d":"1ee61486","chunk-5e0ee7f7":"f9d2296d","chunk-6c118d8f":"6eb7a4b5"}[e]+".css",o=u.p+n,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===n||l===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){s=d[i],l=s.getAttribute("data-href");if(l===n||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.request=n,delete r[e],f.parentNode.removeChild(f),a(c)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){r[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var c=new Promise(function(t,a){n=o[e]=[t,a]});t.push(n[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e),s=function(t){l.onerror=l.onload=null,clearTimeout(d);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+n+": "+r+")");c.type=n,c.request=r,a[1](c)}o[e]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(a,n,function(t){return e[t]}.bind(null,n));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var f=l;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0406":function(e,t,a){},"07dc":function(e,t,a){"use strict";var n="http://www.weichuang.com/",r="http://39.98.208.91:3000/",o={getList:n+"getList",getUser:n+"getUser",regexp:n+"regexp",list:n+"list",getVarietyItem:n+"getVarietyItem",registUser:r+"user/registUser",loginUser:r+"user/loginUser",getTypes:r+"type/getTypes",getProductsByType:r+"product/getProductsByType",getDetail:r+"product/getDetail",addCart:r+"cart/addCart",getCart:r+"cart/getCart",delCart:r+"cart/delCart",updateCart:r+"cart/updateCart"};t["a"]=o},4471:function(e,t,a){"use strict";var n=a("8c0c"),r=a.n(n);r.a},"4fd3":function(e){e.exports={list:[{name:"wc",age:20},{name:"hm",age:30}]}},"56d7":function(e,t,a){"use strict";a.r(t);a("06a3");var n=a("e5ab"),r=(a("b46c"),a("072f")),o=(a("fc7b"),a("b801")),c=(a("c8cd"),a("481c")),i=(a("8318"),a("3c26")),u=(a("7ebc"),a("7106")),s=(a("fe26"),a("c54d")),l=(a("7a2c"),a("d22a")),d=(a("bd04"),a("6316")),f=(a("5ea3"),a("322d")),p=(a("4e95"),a("33f0")),m=(a("20d0"),a("9a00")),h=(a("1c71"),a("0687")),g=(a("da0f"),a("9f2a")),v=(a("f6a0"),a("c125")),b=(a("6b83"),a("be71")),w=(a("ef6d"),a("2a20")),y=(a("30b2"),a("2cab")),C=(a("70b7"),a("b530")),k=(a("0f3c"),a("efb0")),_=(a("8b1f"),a("caf5")),x=(a("c382"),a("676d")),A=(a("3867"),a("fd14")),T=(a("e5b3"),a("a3b2")),E=(a("fa6b"),a("c34a")),I=(a("e997"),a("4cf9")),O=(a("b8e8"),a("3631")),S=(a("5c07"),a("53da"),a("2556"),a("d0f8"),a("e8c7")),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[a("transition",{attrs:{name:"fade"}},[e.$route.meta.keepAlive?a("router-view"):e._e()],1),a("transition",{attrs:{name:"fade"}},[e.$route.meta.keepAlive?e._e():a("router-view")],1),a("router-view",{attrs:{name:"footer-bar"}})],1)},$=[],N={name:"app",data:function(){return{}}},P=N,B=(a("57c5"),a("8c9c")),L=Object(B["a"])(P,j,$,!1,null,"02bfddb9",null),U=L.exports,G=a("081a"),H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回"},on:{"click-left":function(t){return e.$router.go(-1)}}}),a("img",{staticClass:"detail-img",attrs:{src:e.detail.img,alt:""}}),a("div",{staticClass:"detail-info"},[a("p",{staticClass:"detail-info-name"},[e._v(e._s(e.detail.name))]),a("p",{staticClass:"detail-info-price"},[e._v("￥"+e._s(e.detail.price))]),a("p",{staticClass:"detail-info-company"},[e._v("公司："+e._s(e.detail.company))]),a("p",{staticClass:"detail-info-city"},[e._v("产地："+e._s(e.detail.city))])]),a("div",{staticClass:"detail-stepper"},[e._v("购买数量：\n    "),a("van-stepper",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("div",{staticClass:"toolBar"},[a("van-goods-action",[a("van-goods-action-mini-btn",{attrs:{icon:"chat-o",text:"客服"}}),a("van-goods-action-mini-btn",{attrs:{icon:"cart-o",text:"购物车",info:e.$store.state.goodsCount},on:{click:function(t){return e.$router.push("/cart")}}}),a("van-goods-action-big-btn",{attrs:{text:"加入购物车"},on:{click:e.addCart}}),a("van-goods-action-big-btn",{attrs:{primary:"",text:"立即购买"}})],1)],1)],1)},M=[],R=a("badb"),z=a.n(R),D=a("bd31"),V=a("7f43"),q=a.n(V),J=a("07dc"),Z=a("52c1"),F={name:"detail",data:function(){return{value:1,detail:{}}},computed:Object(D["a"])({},Object(Z["c"])(["userInfo"])),methods:{addCart:function(){var e=this;"{}"===z()(this.userInfo)?(this.$toast.fail("请先进行登录"),setTimeout(function(){e.$router.push("/profile")},1e3)):q()({url:J["a"].addCart,method:"post",data:{userId:this.userInfo._id,productId:this.detail._id,count:this.value,selected:!0}}).then(function(t){console.log(t),200==t.data.code&&(e.$toast.success(t.data.msg),e.$store.dispatch("getCartAction"))}).catch(function(e){console.log(e)})}},created:function(){var e=this;q()({url:J["a"].getDetail,method:"get",params:{id:this.$route.params.id}}).then(function(t){e.detail=t.data}).catch(function(e){console.log(e)})}},K=F,Q=(a("4471"),Object(B["a"])(K,H,M,!1,null,"7debbae6",null)),W=Q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footerBar"},[a("van-tabbar",{on:{change:e.change},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"home-o",to:"/"}},[e._v("首页")]),a("van-tabbar-item",{attrs:{icon:"records",to:"/category"}},[e._v("分类")]),a("van-tabbar-item",{attrs:{icon:"cart-o",info:e.$store.state.goodsCount,to:"/cart"}},[e._v("购物车")]),a("van-tabbar-item",{attrs:{icon:"contact",to:"/profile"}},[e._v("我的")])],1)],1)},Y=[],ee=a("0649"),te=a.n(ee),ae={name:"footerBar",data:function(){return{active:0}},watch:{active:function(e){console.log(e),e=te()(localStorage.getItem("active"))}},methods:{change:function(e){localStorage.setItem("active",e)}},created:function(){te()(localStorage.getItem("active"))&&(this.active=te()(localStorage.getItem("active")))}},ne=ae,re=Object(B["a"])(ne,X,Y,!1,null,"20e6a30a",null),oe=re.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error"},[e._v("出错啦")])},ie=[],ue={},se=ue,le=(a("cbbd"),Object(B["a"])(se,ce,ie,!1,null,"844044b8",null)),de=le.exports,fe=function(){return a.e("chunk-04d71d50").then(a.bind(null,"bb51"))},pe=function(){return a.e("chunk-6c118d8f").then(a.bind(null,"4886"))},me=function(){return a.e("chunk-5e0ee7f7").then(a.bind(null,"b789"))},he=function(){return a.e("chunk-3b6f328d").then(a.bind(null,"c66d"))};S["a"].use(G["a"]);var ge=new G["a"]({routes:[{path:"/",name:"home",components:{default:fe,"footer-bar":oe},meta:{keepAlive:!0}},{path:"/category",name:"category",components:{default:pe,"footer-bar":oe},meta:{keepAlive:!0}},{path:"/cart",name:"cart",components:{default:me,"footer-bar":oe},meta:{keepAlive:!1,auth:!0}},{path:"/profile",name:"profile",components:{default:he,"footer-bar":oe},meta:{keepAlive:!1}},{path:"/detail/:id",name:"detail",component:W,meta:{keepAlive:!1}},{path:"*",component:de}]}),ve=a("75f2"),be=a.n(ve);a("c29e");S["a"].use(Z["a"]);var we=new Z["a"].Store({state:{status:0,userInfo:{},goodsCount:0},mutations:{CHANGESTATUS:function(e,t){e.status=t},CHANGELOGIN:function(e,t){e.userInfo=t},CHANGECART:function(e,t){e.goodsCount=t}},actions:{statusAction:function(e,t){var a=e.commit;a("CHANGESTATUS",t)},loginAction:function(e,t){var a=e.commit;a("CHANGELOGIN",t)},getCartAction:function(e){var t=e.commit,a=e.state;"{}"!=z()(a.userInfo)&&q()({url:J["a"].getCart,method:"get",params:{userId:a.userInfo._id}}).then(function(e){console.log(e);var a=0,n=!0,r=!1,o=void 0;try{for(var c,i=be()(e.data);!(n=(c=i.next()).done);n=!0){var u=c.value;a+=u.count}}catch(s){r=!0,o=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}t("CHANGECART",a)}).catch(function(e){console.log(e)})}}});a("aed4");(function(e){var t,a=e.document,n=a.documentElement;function r(){var e=n.getBoundingClientRect().width,t=e/6.4;n.style.fontSize=t+"px",console.log(.14*t)}e.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(r,10)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(t),t=setTimeout(r,10))},!1),r()})(window);var ye=a("fddc"),Ce=a.n(ye),ke=a("4fd3");Ce.a.mock("http://www.weichuang.com/getList",{data:ke.list}),Ce.a.mock("http://www.weichuang.com/getUser",{"name|2":"weichuang","age|18-35":20}),Ce.a.mock("http://www.weichuang.com/regexp",{regexp1:/[a-z][A-Z][0-9]/,regexp2:/\d{5,10}/}),Ce.a.mock("http://www.weichuang.com/list",{"info|10-20":[{"index|+1":1,name:"@first @last",id:"@integer(10000, 99999)",date:"@datetime",img:'@image("200*200")',text:"@sentence(6, 22)"}]});var _e=Ce.a.Random,xe=function(e){for(var t=[],a=0;a<100;a++){var n={name:_e.ctitle(5,20),img:_e.dataImage("100x100","农机"+_e.integer(1,100)),price:_e.integer(1e3,1e4),owner:_e.cname()};t.push(n)}return t};Ce.a.mock("http://www.weichuang.com/getVarietyItem",xe),S["a"].use(n["a"]).use(r["a"]).use(o["a"]).use(c["a"]).use(i["a"]).use(u["a"]).use(s["a"]).use(l["a"]).use(d["a"]).use(f["a"]).use(p["a"]).use(m["a"]).use(h["a"]).use(g["a"]).use(v["a"]).use(b["a"]).use(w["a"]).use(y["a"]).use(C["a"]).use(k["a"]).use(_["a"]).use(x["a"]).use(A["a"]).use(T["a"]).use(E["a"]).use(I["a"]).use(O["a"]),ge.beforeEach(function(e,t,a){e.matched.some(function(e){return e.meta.auth})?1==we.state.status?a():a({path:"/profile"}):a()}),S["a"].config.productionTip=!1,new S["a"]({router:ge,store:we,render:function(e){return e(U)}}).$mount("#app")},"57c5":function(e,t,a){"use strict";var n=a("0406"),r=a.n(n);r.a},"8c0c":function(e,t,a){},a4d0:function(e,t,a){},aed4:function(e,t,a){},cbbd:function(e,t,a){"use strict";var n=a("a4d0"),r=a.n(n);r.a}});